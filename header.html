<!-- /header.html -->
<nav class="nav-wrap" role="navigation" aria-label="Main">
  <div class="nav">
    <a class="brand" href="/">
      <span class="name">The NBA Agent</span>
      <span class="kicker">Player Representation</span>
    </a>

    <!-- Mobile hamburger (becomes X when open) -->
    <button class="hamburger" aria-label="Toggle menu" aria-expanded="false" data-nav-toggle>
      <span></span><span></span><span></span>
    </button>

    <!-- Desktop links (unchanged for desktop) -->
    <ul class="links" data-navlist>
      <li><a href="/">About</a></li>

      <li class="has-sub" aria-haspopup="true">
        <a href="/players/">Players</a>
        <button class="caret" aria-expanded="false" aria-label="Toggle Players submenu"></button>
        <ul class="sub" aria-label="Players submenu">
          <li><a href="/players/lacey.html">Lacey James</a></li>
          <li><a href="/players/birima.html">Birima Seck</a></li>
        </ul>
      </li>

      <li><a href="/contact.html">Contact</a></li>
    </ul>
  </div>

  <!-- Mobile full-screen overlay menu -->
  <div class="mobile-overlay" aria-hidden="true" hidden>
    <div class="overlay-inner" role="dialog" aria-modal="true" aria-label="Site Menu">
      <nav class="overlay-nav">
        <ul class="overlay-links">
          <li><a href="/">About</a></li>
          <li class="has-sub">
            <button class="overlay-accordion" aria-expanded="false">
              <span>Players</span><i class="car"></i>
            </button>
            <ul class="overlay-sub">
              <li><a href="/players/lacey.html">Lacey James</a></li>
              <li><a href="/players/birima.html">Birima Seck</a></li>
            </ul>
          </li>
          <li><a href="/contact.html">Contact</a></li>
        </ul>
      </nav>
    </div>
    <!-- Clickable backdrop area to close -->
    <button class="overlay-backdrop" aria-label="Close menu"></button>
  </div>

  <style>
    /* Prevent horizontal wobble */
    html, body { overflow-x: hidden; }

    /* --- BASE header layout remains controlled by your site CSS --- */
    .nav-wrap { width: 100%; }
    .nav { display:flex; align-items:center; justify-content:space-between; gap:16px; padding:12px 16px; }
    .brand { text-decoration:none; display:inline-flex; flex-direction:column; gap:2px; }
    .brand .name { font-weight:800; letter-spacing:.02em; line-height:1; }
    .brand .kicker { font-size:12px; letter-spacing:.12em; text-transform:uppercase; opacity:.7; }

    /* Hamburger */
    .hamburger {
      display:none;
      -webkit-tap-highlight-color: transparent;
      width:44px; height:44px; border:1px solid rgba(0,0,0,.12);
      border-radius:12px; background:#fff; align-items:center; justify-content:center;
    }
    .hamburger span { display:block; width:20px; height:2px; background:#0b0b0b; margin:2.5px 0; transition:transform .25s ease, opacity .25s ease; }
    .hamburger[aria-expanded="true"] span:nth-child(1){ transform: translateY(4.5px) rotate(45deg); }
    .hamburger[aria-expanded="true"] span:nth-child(2){ opacity: 0; }
    .hamburger[aria-expanded="true"] span:nth-child(3){ transform: translateY(-4.5px) rotate(-45deg); }

    /* Desktop keeps your existing links; mobile replaces with overlay */
    @media (max-width: 900px){
      .hamburger { display:inline-flex; }
      .links { display:none; }
      body.nav-open { overflow:hidden; }
    }

    /* ===== Mobile full-screen overlay ===== */
    .mobile-overlay[hidden] { display:none !important; }
    .mobile-overlay {
      position: fixed; inset: 0; z-index: 9999; /* above page */
    }
    /* Semi-opaque grey backdrop (80%) */
    .overlay-backdrop {
      position:absolute; inset:0;
      background: rgba(128,128,128,0.8);
      border:0; padding:0; margin:0; cursor: default;
    }
    /* Content area */
    .overlay-inner {
      position:absolute; inset:0;
      display:grid; grid-template-rows: var(--topbar,64px) 1fr;
      color:#fff; pointer-events:none; /* children re-enable */
    }
    /* Keep a top bar space so the X sits exactly where the hamburger is */
    .overlay-inner::before{
      content:""; display:block; height:var(--topbar,64px);
      pointer-events:none;
    }

    /* The actual nav */
    .overlay-nav { pointer-events:auto; }
    .overlay-links {
      list-style:none; margin:0; padding:18px;
      display:grid; gap:6px;
    }
    .overlay-links > li > a {
      display:block; padding:14px 4px; font-size:22px; color:#fff; text-decoration:none;
    }

    /* Accordion for Players */
    .overlay-accordion {
      -webkit-tap-highlight-color: transparent;
      width:100%; display:flex; align-items:center; justify-content:space-between;
      padding:14px 4px; font-size:22px; color:#fff;
      background:transparent; border:0; text-align:left; cursor:pointer;
    }
    .overlay-accordion .car{
      width:14px; height:14px; border-right:2px solid #fff; border-bottom:2px solid #fff;
      transform: rotate(-45deg); transition: transform .2s ease;
      flex: 0 0 14px;
    }
    .overlay-accordion[aria-expanded="true"] .car{ transform: rotate(135deg); }

    .overlay-sub { list-style:none; margin:0; padding: 0 0 8px 10px; display:none; }
    .overlay-sub li a { display:block; padding:10px 4px; font-size:18px; color:#fff; text-decoration:none; opacity:.95; }
    .overlay-sub.open { display:block; }
  </style>

  <script>
    (function(){
      const navWrap = document.querySelector('.nav-wrap');
      const hamb = navWrap.querySelector('[data-nav-toggle]');
      const overlay = navWrap.querySelector('.mobile-overlay');
      const backdrop = navWrap.querySelector('.overlay-backdrop');
      const overlayNav = navWrap.querySelector('.overlay-nav');
      const accordions = navWrap.querySelectorAll('.overlay-accordion');

      if (!hamb || !overlay || !backdrop || !overlayNav) return;

      function openMenu(){
        overlay.hidden = false;
        overlay.setAttribute('aria-hidden','false');
        document.body.classList.add('nav-open');
        hamb.setAttribute('aria-expanded','true');
      }
      function closeMenu(){
        overlay.hidden = true;
        overlay.setAttribute('aria-hidden','true');
        document.body.classList.remove('nav-open');
        hamb.setAttribute('aria-expanded','false');
        // collapse accordions
        accordions.forEach(btn => {
          btn.setAttribute('aria-expanded','false');
          const sub = btn.parentElement.querySelector('.overlay-sub');
          if (sub) sub.classList.remove('open');
        });
      }

      // Toggle
      hamb.addEventListener('click', () => {
        const expanded = hamb.getAttribute('aria-expanded') === 'true';
        expanded ? closeMenu() : openMenu();
      });

      // Close on backdrop click
      backdrop.addEventListener('click', closeMenu);

      // Close on Esc
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closeMenu();
      });

      // Close when a link is tapped
      overlayNav.addEventListener('click', (e) => {
        const a = e.target.closest('a');
        if (a) closeMenu();
      });

      // Accordion behavior
      accordions.forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          const expanded = btn.getAttribute('aria-expanded') === 'true';
          btn.setAttribute('aria-expanded', expanded ? 'false' : 'true');
          const sub = btn.parentElement.querySelector('.overlay-sub');
          if (sub) sub.classList.toggle('open', !expanded);
        });
      });

      // Ensure overlay top bar height matches header height on mobile
      function syncTopbarHeight(){
        const rect = navWrap.getBoundingClientRect();
        const h = Math.round(rect.height);
        overlay.style.setProperty('--topbar', h + 'px');
      }
      syncTopbarHeight();
      window.addEventListener('resize', syncTopbarHeight);
    })();
  </script>
</nav>
